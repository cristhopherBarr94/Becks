<ion-content>
  <user-menu></user-menu>

  <section
    class="content-flex-all-center flex-direction-column container-schedule-component"
  >
    <h1 class="title-primary" *ngIf="this.size == 'lg' || this.size == 'md'">
      calendario
    </h1>

    <h1
      class="calendar-title title-secondary"
      *ngIf="this.size == 'xs' || this.size == 'sm'"
    >
      Experiencias
    </h1>
    <span class="separator-white"></span>
    <ion-row>
      <div id="calendar" class="calendar">
        <h3
          class="title-secondary"
          *ngIf="this.size == 'lg' || this.size == 'md'"
        >
          {{ currentYear }}
        </h3>
        <ion-row
          class="schedule-container"
          *ngIf="this.size == 'lg' || this.size == 'md'"
        >
          <button (click)="previousDate()" class="btn btn-left">
            <span class="left-arrow-icon"> </span>
          </button>
          <button (click)="nextDate()" class="btn btn-right">
            <span class="left-arrow-icon"> </span>
          </button>
        </ion-row>
        <ion-row>
          <div class="calendar-container">
            <mat-calendar
              *ngIf="newEvents"
              #calendar1
              class="month1"
              [minDate]="minDate"
              [selected]="selectedDate"
              (selectedChange)="onSelect($event)"
              [dateClass]="dateClass()"
            ></mat-calendar>
          </div>
          <div>
            <mat-calendar
              *ngIf="newEvents && (this.size == 'lg' || this.size == 'md')"
              #calendar2
              class="month2"
              [minDate]="minDate2"
              [selected]="selectedDate"
              (selectedChange)="onSelect($event)"
              [dateClass]="dateClass()"
            ></mat-calendar>
          </div>
        </ion-row>
      </div>
      <div id="shkCont" class="schedule">
        <div *ngIf="newEvents && (this.size == 'lg' || this.size == 'md')">
          <h2 class="title-secondary">próximos eventos</h2>
          <h4 class="title-tertiary">{{ DayAndDate }}</h4>
        </div>
        <div id="schBar" class="schedule-over">
          <p *ngIf="!showEvent">Ningún evento disponible.</p>

          <!-- calendar events view for desktop-->
          <div *ngIf="this.size == 'lg' || this.size == 'md'">
            <div class="schedule-body" *ngFor="let event of exps">
              <a [routerLink]="['/user/exp/' + event.id]">
                <div
                  class="card-schedule"
                  *ngIf="showDate(event.fechaAlt, event.fechaExp)"
                >
                  <ion-row>
                    <div class="width-box">
                      <div class="title-tertiary title-card">
                        {{ event.titleExp }}
                      </div>
                      <div class="title-tertiary hour-card">
                        {{ event.fechaExp }}
                      </div>
                      <div
                        class="title-tertiary"
                        [ngClass]="
                          showDataExperience(
                            event.id,
                            event.stock_actual,
                            event.status
                          )
                        "
                      ></div>
                    </div>
                    <div
                      *ngIf="this.size == 'lg' || this.size == 'md'"
                      class="circle-icon"
                    >
                      <span
                        class="img-exp"
                        [ngStyle]="{
                          'background-image': 'url(' + event.imagesExpMob + ')'
                        }"
                      >
                      </span>
                    </div>
                  </ion-row>
                  <!-- <ion-row>
                  <div class="guest-card" title="@usuario"></div>
                  <div class="guest-card" title="@usuario"></div>
                  <div class="guest-card" title="@usuario"></div>
                  <div class="guest-card" title="@usuario"></div>
                </ion-row> -->
                </div>
              </a>
            </div>
          </div>

          <!-- calendar events view for mobile -->
          <div *ngIf="this.size == 'xs' || this.size == 'sm'">
            <div class="card-event" *ngFor="let item of exps">
              <a [routerLink]="['/user/exp/' + item.id]">
                <ion-row *ngIf="showDate(item.fechaAlt, item.fechaExp)">
                  <div class="lateral-month">
                    <h1 class="title-tertiary">
                      {{
                        item.fechaExp.split("/")[1] +
                          "/" +
                          item.fechaExp.split("/")[0] +
                          "/" +
                          item.fechaExp.split("/")[2] | date: "MMM"
                      }}
                    </h1>
                    <h2 class="day-event title-tertiary">
                      {{ item.fechaExp.split("/")[0] }}
                    </h2>
                    <div class="vertical_dotted_line"></div>
                  </div>
                  <div
                    class="img-event"
                    [style.background-image]="
                      'linear-gradient(90deg, rgba(2, 2, 2, 0.6) 0%, rgba(2, 2, 2, 0.6) 100%), url(' +
                      item.imagesExp +
                      ')'
                    "
                  >
                    <div class="event-description">
                      <p class="title-secondary">{{ item.titleExp }}</p>
                      <p class="title-tertiary">
                        {{
                          item.fechaExp.split("/")[1] +
                            "/" +
                            item.fechaExp.split("/")[0] +
                            "/" +
                            item.fechaExp.split("/")[2] | date: "EEEE"
                        }}
                        {{
                          item.fechaExp.split("/")[1] +
                            "/" +
                            item.fechaExp.split("/")[0] +
                            "/" +
                            item.fechaExp.split("/")[2] | date: "dd"
                        }}
                        {{
                          item.fechaExp.split("/")[1] +
                            "/" +
                            item.fechaExp.split("/")[0] +
                            "/" +
                            item.fechaExp.split("/")[2] | date: "LLL"
                        }}
                      </p>
                      <div
                        class="title-tertiary card-button"
                        [ngClass]="
                          showDataExperience(
                            item.id,
                            item.stock_actual,
                            item.status
                          )
                        "
                      ></div>
                    </div>
                  </div>
                </ion-row>
              </a>
            </div>
          </div>
        </div>
      </div>
      <button
        id="drop"
        *ngIf="showEvent && (this.size == 'xs' || this.size == 'sm')"
        class="btn-next btn-card"
        (click)="classTransition()"
      >
        <span class="material-icons">keyboard_arrow_down</span>
      </button>
    </ion-row>
  </section>
  <app-footer></app-footer>
</ion-content>
