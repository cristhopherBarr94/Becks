<section id="formSection" class="fullSection content-flex-all-center">
  <div class="full-height padding-form">
    <form [formGroup]="userEditForm" autocomplete="off" class="general-row">
      <ion-row>
        <div class="form-section section1">
         
          <ion-row >
            <span class="people-icon" style="margin-right: 30px;"> </span>

            <mat-form-field
            appearance="fill"
            floatLabel="auto"
            class="middleInput"
            [ngClass]="getClassInput(userEditForm.controls.name)"
          >
            <mat-label>Nombre de la experiencia</mat-label>
            
            <input
              matInput
              (input)="inputValidatorAlphabetical($event)"
              formControlName="name"
              maxlength="20"
              [(ngModel)]="userRegister.name"
              data-qadp="name"
            />
            <mat-error *ngIf="userEditForm.controls.name.touched &&  userEditForm.controls.name.errors">
              *Has ingresado un dato inválido
            </mat-error>
          </mat-form-field>
  
          </ion-row>
          <ion-row>
            <span class="schedule-icon"> </span>
            <mat-form-field
            appearance="fill"
            floatLabel="auto"
            class="smallInput"
            [ngClass]="getClassInput(userEditForm.controls.dateStart)"
            >
            <mat-label>Fecha inicial de la publicación</mat-label>
            <input 
            matInput 
            [ngxMatDatetimePicker]="picker1" 
            [min]="minDate" 
            [max]="maxDate" 
            [disabled]="disabled"
            formControlName="dateStart">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <ngx-mat-datetime-picker #picker1 [showSpinners]="true" [showSeconds]="true"
             [touchUi]="false" [color]="black"
            [enableMeridian]="enableMeridian" [disableMinute]="false" [hideTime]="hideTime">
          </ngx-mat-datetime-picker>
          <mat-error *ngIf="userEditForm.controls.dateStart.touched &&  userEditForm.controls.dateStart.errors">
            *Has ingresado un dato inválido
          </mat-error>
           </mat-form-field>

           <mat-form-field
           appearance="fill"
           floatLabel="auto"
           class="smallInput"
           [ngClass]="getClassInput(userEditForm.controls.dateEnd)"
           >
           <mat-label>Fecha final de la publicación</mat-label>
           <input 
           matInput 
           [ngxMatDatetimePicker]="picker2" 
           [min]="minDate" 
           [max]="maxDate" 
           formControlName="dateEnd">
         <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
         <ngx-mat-datetime-picker #picker2 [showSpinners]="true" [showSeconds]="true" 
           [touchUi]="touchUi" [color]="color"
           [enableMeridian]="enableMeridian" [disableMinute]="disableMinute" [hideTime]="hideTime">
         </ngx-mat-datetime-picker>
         <mat-error *ngIf="userEditForm.controls.dateEnd.touched &&  userEditForm.controls.dateEnd.errors">
          *Has ingresado un dato inválido
        </mat-error>
          </mat-form-field>
           
          </ion-row>

          <ion-row>
            <span class="location-icon"> </span>
            <mat-form-field
            appearance="fill"
            floatLabel="auto"
            class="fullInput"
            [ngClass]="getClassInput(userEditForm.controls.location)"
          >
            <mat-label>Agregar Ubicación</mat-label>
            
            <input
              matInput
              (input)="inputValidatorAlphabetical($event)"
              formControlName="location"
              maxlength="20"
              [(ngModel)]="userRegister.location"
              data-qadp="location"
            />
            <mat-error *ngIf="userEditForm.controls.location.touched &&  userEditForm.controls.location.errors">
              *Has ingresado un dato inválido
            </mat-error>
          </mat-form-field>
          </ion-row>
        
          <ion-row>
            <span class="text-icon"> </span>
            <mat-form-field
            appearance="fill"
            floatLabel="auto"
            class="fullInput"
            [ngClass]="getClassInput(userEditForm.controls.descrip)"
          >
            <mat-label>Agregar descripción de la experiencia</mat-label>
            <textarea 
            matInput
            (input)="inputValidatorAlphabetical($event)"
              formControlName="descrip"
              maxlength="150"
              [(ngModel)]="userRegister.descrip"
              data-qadp="descrip"
              ></textarea>
            <mat-error *ngIf="userEditForm.controls.descrip.touched &&  userEditForm.controls.descrip.errors">
              *Has ingresado un dato inválido
            </mat-error>
          </mat-form-field>
          </ion-row>
         
          
          <ion-row>
            <span class="stock-icon"> </span>
            <div>
              <ion-row class="space-between">
                <p>
                  ¿La  experiencia requiere stock  o inventario?
                </p>
                <mat-slide-toggle [checked]="this.hideStk" name="stk" (change)="hideField($event.source.name,$event.source._checked)" ></mat-slide-toggle>
              </ion-row>

              <mat-form-field   
              *ngIf="this.hideStk"
              appearance="fill"
              floatLabel="auto"
              class="smallInput"
              [ngClass]="getClassInput(userEditForm.controls.stock)"
            >
              <mat-label>Cantidad</mat-label>
              
              <input
                matInput
                (input)="inputValidatorNumeric($event)"
                formControlName="stock"
                maxlength="6"
                [(ngModel)]="userRegister.stock"
                data-qadp="stock"
              />
              <mat-error *ngIf="userEditForm.controls.stock.touched &&  userEditForm.controls.stock.errors">
                *Has ingresado un dato inválido
              </mat-error>
            </mat-form-field>
            </div>
          </ion-row>
        
          <ion-row>
            <span class="time-icon"> </span>
            <div>
              <ion-row class="space-between">
                <p>
                  ¿La  experiencia requiere Periodicidad?
                </p>
                <mat-slide-toggle  [checked]="!this.hideStk" name="period" (change)="hideField($event.source.name,$event.source._checked)"></mat-slide-toggle>
              </ion-row>
              <ion-row>
                <mat-form-field
                *ngIf="!this.hideStk"
                appearance="fill"
                floatLabel="auto"
                class="smallInput"
                [ngClass]="getClassInput(userEditForm.controls.period)"
              >
                <mat-label>Cupos</mat-label>
                
                <input
                  matInput
                  (input)="inputValidatorNumeric($event)"
                  formControlName="period"
                  maxlength="6"
                  [(ngModel)]="userRegister.period"
                  data-qadp="period"
                />
                <mat-error *ngIf="userEditForm.controls.period.touched &&  userEditForm.controls.period.errors">
                  *Has ingresado un dato inválido
                </mat-error>
              </mat-form-field>
      
               <mat-form-field
               *ngIf="!this.hideStk"
               appearance="fill"
               floatLabel="auto"
               class="smallInput"
               [ngClass]="getClassInput(userEditForm.controls.dateRelease)"
               >
               <mat-label>Fecha de liberación</mat-label>
               <input 
               matInput 
               formControlName="dateRelease"
               [ngxMatDatetimePicker]="picker3" 
               [min]="minDate" 
               [max]="maxDate" 
               [disabled]="disabled"
               [(ngModel)]="userRegister.dateRelease"
               >
             <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
             <ngx-mat-datetime-picker #picker3 [showSpinners]="true" [showSeconds]="true" 
               [touchUi]="touchUi" [color]="color"
               [enableMeridian]="enableMeridian" [disableMinute]="disableMinute" [hideTime]="hideTime">
             </ngx-mat-datetime-picker>
             <mat-error *ngIf="userEditForm.controls.dateRelease.touched &&  userEditForm.controls.dateRelease.errors">
              *Has ingresado un dato inválido
            </mat-error>
              </mat-form-field>
               
              </ion-row>
            </div>
          </ion-row>

          <ion-row>
            <span class="location-icon"> </span>
              <div>
                <ion-row class="space-between">
                  <p>
                    ¿La  experiencia requiere un enlace?
                  </p>
                  <mat-slide-toggle name="path" (change)="hideField($event.source.name,$event.source._checked)"></mat-slide-toggle>
                </ion-row>
      
      
              <mat-form-field
              *ngIf="!this.hidepath"
              appearance="fill"
              floatLabel="auto"
              class="fullInput"
              [ngClass]="getClassInput(userEditForm.controls.path)"
            >
              <mat-label>URL</mat-label>
              
              <input
                matInput
                formControlName="path"
                maxlength="150"
                [(ngModel)]="userRegister.path"
                data-qadp="location"
              />
              <mat-error *ngIf="userEditForm.controls.path.touched &&  userEditForm.controls.path.errors">
                *Has ingresado un dato inválido
              </mat-error>
            </mat-form-field>
            <ion-row class="space-around"    *ngIf="!this.hidepath">
              <mat-checkbox [checked]="!this.checked" (change)="unCheck()"></mat-checkbox> <p>Contenido embebido dentro de la APP</p>
              <mat-checkbox [checked]="this.checked" (change)="unCheck()"></mat-checkbox> <p>Enlace o link externo (dirige a otra página)</p>
            </ion-row>      
          </div>
          </ion-row>

       

      <ion-row class="margin-left ">
        <div>
          <input
          id="selectedFile"
          style="display: none"
          type="file"
          (change)="loadImageFromDesktop($event)"
          id="file-input"
          accept="image/png, image/jpeg"
          #hiddenfileinput1
        />
          <p>Subir imagen desktop</p>
          <button class="btn-upload" (click)="hiddenfileinput1.click()">
            <span class="upload-icon" *ngIf="!this.loadedFileDes.length > 0"> </span>
            <ion-row *ngIf="this.loadedFileDes.length > 0">
              <span class="btn-text">
                <span>{{ this.loadedFileDes}}</span>
              </span>
              <button (click)="clear('D')" class="btn-x">
                <span class="x-icon"> </span>
              </button>
            </ion-row>
          </button>
        </div>
        <div style="margin-left: 30px;">
          <input
          id="selectedFile"
          style="display: none"
          type="file"
          (change)="loadImageFromMobile($event)"
          id="file-input"
          accept="image/png, image/jpeg"
          #hiddenfileinput2
        />
          <p>Subir imagen mobile</p>
          <button class="btn-upload" (click)="hiddenfileinput2.click()">
            <span class="upload-icon" *ngIf="!this.loadedFileMob.length > 0"> </span>
            <ion-row *ngIf=" this.loadedFileMob.length > 0">
              <span class="btn-text">
                <span>{{ this.loadedFileMob}}</span>
              </span>
              <button (click)="clear('M')" class="btn-x">
                <span class="x-icon"> </span>
              </button>
            </ion-row>
          </button>
        </div>
      </ion-row>
      
        </div>
      </ion-row>
    </form>

    <br /><mat-error *ngIf="httpError" class="error-http">{{ httpError }}</mat-error>
  
    <ion-row class="margin-left ">
      <button
      block="block"
      color="becks"
      (click)="saveUser()"
      class="becks-btn-primary button-width"
      [ngClass]="{
        'button-disabled': userEditForm.invalid
      }"
      data-qadp="send-button-form"
    >
      <span>CREAR EXPERIENCIA</span>
    </button>
    <button class="btn-cancel"
      (click) = "closeForm()"
    >
      <span>CANCELAR</span>
    </button>
    </ion-row>
  </div>
</section>
